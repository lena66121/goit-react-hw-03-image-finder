(window["webpackJsonpgoit-react-hw-03-image-finder"]=window["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{19:function(e,t,a){e.exports=a(43)},24:function(e,t,a){},25:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=(a(24),a(7)),l=a(2),i=a(3),u=a(5),m=a(4),d=a(6),h=(a(25),function(e){var t=e.value,a=e.onChange,n=e.onSubmit;return r.a.createElement("form",{className:"search-form",onSubmit:n},r.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"Search images...",value:t,onChange:a}))}),p=function(e){var t=e.src,a=e.likes,n=e.views,c=e.comments,o=e.downloads,s=e.handleOpen;return r.a.createElement("div",{className:"photo-card"},r.a.createElement("img",{src:t,alt:"",className:"img"}),r.a.createElement("div",{className:"stats"},r.a.createElement("p",{className:"stats-item"},r.a.createElement("i",{className:"material-icons"},"thumb_up"),a),r.a.createElement("p",{className:"stats-item"},r.a.createElement("i",{className:"material-icons"},"visibility"),n),r.a.createElement("p",{className:"stats-item"},r.a.createElement("i",{className:"material-icons"},"comment"),c),r.a.createElement("p",{className:"stats-item"},r.a.createElement("i",{className:"material-icons"},"cloud_download"),o)),r.a.createElement("button",{type:"button",className:"fullscreen-button",onClick:s},r.a.createElement("i",{className:"material-icons"},"zoom_out_map")))},f=function(e){var t=e.images,a=e.onOpen;return r.a.createElement("ul",{className:"gallery"},t.map((function(e){return r.a.createElement("li",{key:e.id,"data-id":e.id},r.a.createElement(p,{src:e.webformatURL,comments:e.comments,likes:e.likes,views:e.views,downloads:e.downloads,handleOpen:a}))})))},g=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).backdropRef=Object(n.createRef)(),a.handleKeyPress=function(e){var t=a.props.onClose;"Escape"===e.code&&t()},a.handleCloseOverlay=function(e){var t=e.target,n=a.props.onClose;a.backdropRef.current===t&&n()},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.src;return r.a.createElement("div",{className:"overlay",ref:this.backdropRef,onClick:this.handleCloseOverlay,onKeyPress:this.handleCloseOverlay},r.a.createElement("div",{className:"modal"},r.a.createElement("img",{src:e,alt:"img"})))}}]),t}(n.Component),v=a(18),y=a.n(v),E=function(e){return function(e){var t=e.API_KEY,a=e.query,n=e.currentPage;return y.a.get("https://pixabay.com/api/?key=".concat(t,"&per_page=12&page=").concat(n,"&lang=en&lang=ru&image_type=photo&orientation=horizontal&q=").concat(a))}({API_KEY:e.API_KEY,query:e.query,currentPage:e.currentPage}).then((function(e){return e.data.hits}))},b="13752483-76278f8ed6ace6d5706001d0d",O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={images:[],modalIsOpen:!1,currentImg:null,currentPage:0,query:""},a.fetchImages=function(){a.setState({currentPage:1},(function(){var e=a.state,t=e.query,n=e.currentPage;E({API_KEY:b,query:t,currentPage:n}).then((function(e){a.setState({images:e})}))}))},a.handleSubmit=function(e){e.preventDefault(),a.fetchImages()},a.handleChange=function(e){var t=e.target.value;a.setState({query:t})},a.handleClose=function(){a.setState((function(e){return{modalIsOpen:!e.modalIsOpen}}))},a.handleOpen=function(e){var t=e.target.closest("div").childNodes[0].src;a.setState((function(e){return{modalIsOpen:!e.modalIsOpen,currentImg:t}}))},a.fetchImagesMore=function(){var e=a.state,t=e.query,n=e.currentPage;E({API_KEY:b,query:t,currentPage:n}).then((function(e){a.setState((function(t){return{images:[].concat(Object(s.a)(t.images),Object(s.a)(e))}}),(function(){window.scrollTo({top:document.body.scrollHeight-1030,behavior:"smooth"})}))}))},a.handleClickMore=function(){a.setState((function(e){return{currentPage:e.currentPage+1}}),(function(){return a.fetchImagesMore()}))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.images,a=e.modalIsOpen,n=e.currentImg,c=e.query,o=e.currentPage;return r.a.createElement("div",{className:"App"},r.a.createElement(h,{onSubmit:this.handleSubmit,value:c,onChange:this.handleChange}),r.a.createElement(f,{images:t,onOpen:this.handleOpen}),a&&r.a.createElement(g,{src:n,onClose:this.handleClose}),0!==o&&r.a.createElement("button",{className:"button",onClick:this.handleClickMore,type:"button"},"Load more"))}}]),t}(n.Component);o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.bc3c54eb.chunk.js.map