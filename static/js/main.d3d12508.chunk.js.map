{"version":3,"sources":["components/SearchForm/SearchForm.js","components/PhotoCard/PhotoCard.js","components/Gallery/Gallery.js","components/Modal/Modal.js","services/fetchAPI.js","components/App/App.js","index.js"],"names":["SearchForm","value","onChange","onSubmit","className","type","autoComplete","placeholder","PhotoCard","src","likes","views","comments","downloads","handleOpen","alt","onClick","Gallery","images","onOpen","map","img","key","id","data-id","webformatURL","Modal","backdropRef","createRef","handleKeyPress","e","onClose","props","code","handleCloseOverlay","target","current","window","addEventListener","this","removeEventListener","ref","onKeyPress","Component","fetchAPIdata","API_KEY","query","currentPage","axios","get","fetchAPI","then","data","hits","App","state","modalIsOpen","currentImg","fetchImages","setState","handleSubmit","preventDefault","handleChange","handleClose","link","closest","childNodes","fetchImagesMore","scrollTo","top","document","body","scrollHeight","behavior","handleClickMore","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d3d12508.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst SearchForm = ({ value, onChange, onSubmit }) => {\n  return (\n    <form className=\"search-form\" onSubmit={onSubmit}>\n      <input\n        type=\"text\"\n        autoComplete=\"off\"\n        placeholder=\"Search images...\"\n        value={value}\n        onChange={onChange}\n      />\n    </form>\n  );\n};\n\nSearchForm.propTypes = {\n  value: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default SearchForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PhotoCard = ({ src, likes, views, comments, downloads, handleOpen }) => (\n  <div className=\"photo-card\">\n    <img src={src} alt=\"\" className=\"img\" />\n\n    <div className=\"stats\">\n      <p className=\"stats-item\">\n        <i className=\"material-icons\">thumb_up</i>\n        {likes}\n      </p>\n      <p className=\"stats-item\">\n        <i className=\"material-icons\">visibility</i>\n        {views}\n      </p>\n      <p className=\"stats-item\">\n        <i className=\"material-icons\">comment</i>\n        {comments}\n      </p>\n      <p className=\"stats-item\">\n        <i className=\"material-icons\">cloud_download</i>\n        {downloads}\n      </p>\n    </div>\n    <button type=\"button\" className=\"fullscreen-button\" onClick={handleOpen}>\n      <i className=\"material-icons\">zoom_out_map</i>\n    </button>\n  </div>\n);\n\nPhotoCard.propTypes = {\n  src: PropTypes.string.isRequired,\n  comments: PropTypes.number.isRequired,\n  downloads: PropTypes.number.isRequired,\n  likes: PropTypes.number.isRequired,\n  views: PropTypes.number.isRequired,\n  handleOpen: PropTypes.func.isRequired,\n};\n\nexport default PhotoCard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PhotoCard from '../PhotoCard/PhotoCard';\n\nconst Gallery = ({ images, onOpen }) => {\n  return (\n    <ul className=\"gallery\">\n      {images.map(img => (\n        <li key={img.id} data-id={img.id}>\n          <PhotoCard\n            src={img.webformatURL}\n            comments={img.comments}\n            likes={img.likes}\n            views={img.views}\n            downloads={img.downloads}\n            handleOpen={onOpen}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nGallery.propTypes = {\n  onOpen: PropTypes.func.isRequired,\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      comments: PropTypes.number.isRequired,\n      downloads: PropTypes.number.isRequired,\n      likes: PropTypes.number.isRequired,\n      views: PropTypes.number.isRequired,\n    }),\n  ).isRequired,\n};\n\nexport default Gallery;\n","import React, { Component, createRef } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Modal extends Component {\n  backdropRef = createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = e => {\n    const { onClose } = this.props;\n    if (e.code !== 'Escape') return;\n    onClose();\n  };\n\n  handleCloseOverlay = ({ target }) => {\n    const { onClose } = this.props;\n    const { current } = this.backdropRef;\n    if (current !== target) return;\n    onClose();\n  };\n\n  render() {\n    const { src } = this.props;\n    return (\n      <div\n        className=\"overlay\"\n        ref={this.backdropRef}\n        onClick={this.handleCloseOverlay}\n        onKeyPress={this.handleCloseOverlay} // for an accessibility\n      >\n        <div className=\"modal\">\n          <img src={src} alt=\"img\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  src: PropTypes.string.isRequired,\n};\n\nexport default Modal;\n","import axios from 'axios';\n\nexport const fetchAPI = ({ API_KEY, query, currentPage }) => {\n  return axios.get(\n    `https://pixabay.com/api/?key=${API_KEY}&per_page=12&page=${currentPage}&lang=en&lang=ru&image_type=photo&orientation=horizontal&q=${query}`,\n  );\n};\n\nexport const fetchAPIdata = ({ API_KEY, query, currentPage }) => {\n  return fetchAPI({ API_KEY, query, currentPage }).then(data => data.data.hits);\n};\n","import React, { Component } from 'react';\nimport './App.css';\nimport SearchForm from '../SearchForm/SearchForm';\nimport Gallery from '../Gallery/Gallery';\nimport Modal from '../Modal/Modal';\nimport { fetchAPIdata } from '../../services/fetchAPI';\n\nconst API_KEY = '13752483-76278f8ed6ace6d5706001d0d';\n\nclass App extends Component {\n  state = {\n    images: [],\n    modalIsOpen: false,\n    currentImg: null,\n    currentPage: 0,\n    query: '',\n  };\n\n  // componentDidMount() {\n  //   const { currentPage, query } = this.state;\n\n  //   fetchAPIdata({ API_KEY, currentPage, query }).then(data =>\n  //     this.setState({\n  //       images: [...data],\n  //     }),\n  //   );\n  // }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   const { query, currentPage, images } = this.state;\n\n  //   if (prevState.query === query && prevState.currentPage !== currentPage) {\n  //     fetchAPIdata({ API_KEY, query, currentPage }).then(data => {\n  //       this.setState(\n  //         {\n  //           images: [...images, ...data],\n  //         },\n  //         () => {\n  //           window.scrollTo({\n  //             top: document.body.scrollHeight,\n  //             behavior: 'smooth',\n  //           });\n  //         },\n  //       );\n  //     });\n  //   }\n  // }\n\n  fetchImages = () => {\n    this.setState(\n      {\n        currentPage: 1,\n      },\n      () => {\n        const { query, currentPage } = this.state;\n        fetchAPIdata({ API_KEY, query, currentPage }).then(data => {\n          this.setState({\n            images: data,\n          });\n        });\n      },\n    );\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.fetchImages();\n  };\n\n  handleChange = ({ target }) => {\n    const { value } = target;\n    this.setState({\n      query: value,\n    });\n  };\n\n  handleClose = () => {\n    this.setState(state => ({\n      modalIsOpen: !state.modalIsOpen,\n    }));\n  };\n\n  handleOpen = e => {\n    const link = e.target.closest('div').childNodes[0].src;\n    this.setState(state => ({\n      modalIsOpen: !state.modalIsOpen,\n      currentImg: link,\n    }));\n  };\n\n  fetchImagesMore = () => {\n    const { query, currentPage } = this.state;\n\n    fetchAPIdata({ API_KEY, query, currentPage }).then(data => {\n      this.setState(\n        state => ({\n          images: [...state.images, ...data],\n        }),\n        () => {\n          window.scrollTo({\n            top: document.body.scrollHeight - 1350,\n            behavior: 'smooth',\n          });\n        },\n      );\n    });\n  };\n\n  handleClickMore = () => {\n    this.setState(\n      state => ({\n        currentPage: state.currentPage + 1,\n      }),\n      () => this.fetchImagesMore(),\n    );\n  };\n\n  render() {\n    const { images, modalIsOpen, currentImg, query, currentPage } = this.state;\n    return (\n      <div className=\"App\">\n        <SearchForm\n          onSubmit={this.handleSubmit}\n          value={query}\n          onChange={this.handleChange}\n        />\n        <Gallery images={images} onOpen={this.handleOpen} />\n        {modalIsOpen && <Modal src={currentImg} onClose={this.handleClose} />}\n        {currentPage !== 0 && (\n          <button\n            className=\"button\"\n            onClick={this.handleClickMore}\n            type=\"button\"\n          >\n            Load more\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}